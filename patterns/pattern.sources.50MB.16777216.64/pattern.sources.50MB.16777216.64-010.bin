model the main loop of your application after the
   following p